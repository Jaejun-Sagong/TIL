## Transaction **이란?**

트랜잭션(Transaction 이하 트랜잭션)이란, 데이터베이스의 상태를 변화시키기 해서 수행하는 작업의 단위를 뜻한다.

데이터베이스의 상태를 변화시킨다는 것은 무얼 의미하는 것일까?

간단하게 말해서 아래의 질의어(SQL)를 이용하여 데이터베이스를 접근 하는 것을 의미한다.

- SELECT
- INSERT
- DELETE
- UPDATE

착각하지 말아야 할 것은, 작업의 단위는 질의어 한문장이 아니라는 점이다.

작업단위는 많은 질의어 명령문들을 사람이 정하는 기준에 따라 정하는 것을 의미한다.

게시판을 예로 들어보자.

게시판 사용자는 게시글을 작성하고, 올리기 버튼을 누른다. 그 후에 다시 게시판에 돌아왔을때,

게시판은 자신의 글이 포함된 업데이트된 게시판을 보게 된다.

이러한 상황을 데이터베이스 작업으로 옮기면, 사용자가 올리기 버튼을 눌렀을 시, Insert 문을 사용하여

사용자가 입력한 게시글의 데이터를 옮긴다. 그 후에, 게시판을 구성할 데이터를 다시 Select 하여 최신 정보로

유지한다. 여기서 작업의 단위는 insert문과 select문 둘다 를 합친것이다. 이러한 작업단위를 하나의 트랜잭션이라 한다.

관리자나 개발자가 하나의 트랜잭션 설계를 잘하는 것이 데이터를 다루는 것에 많은 이점이 있다.

## 트랜잭션의 특징

![https://blog.kakaocdn.net/dn/lh19u/btq12wRxTWQ/BygoMJEG3oiMSBsMF9JtS0/img.png](https://blog.kakaocdn.net/dn/lh19u/btq12wRxTWQ/BygoMJEG3oiMSBsMF9JtS0/img.png)

트랜잭션에는 4가지의 특징이 존재한다.

1. 원자성
2. 일관성
3. 독립성
4. 지속성

### 원자성

원자성은 트랜잭션이 **DB에 모두 반영되거나, 전혀 반영되지 않거나**를 뜻한다.**All** or **Nothing**을 생각하면 된다.

### 일관성

일관성은 트랜잭션 **작업 처리의 결과가 항상 일관되어야 한다**를 뜻한다.즉, 데이터 타입이 반환 후와 전이 항상 동일해야 한다.

### 독립성

독립성은 **하나의 트랜잭션은 다른 트랜잭션에 끼어들 수 없고 마찬가지로 독립적임**을 의미한다.즉, 각각의 트랜잭션은 독립적이라 서로 간섭이 불가능하다.

### 지속성

지속성은 **트랜잭션이 성공적으로 완료되면 영구적으로 결과에 반영되어야 함**을 뜻한다.보통 commit 이 된다면 지속성은 만족할 수 있다.

## 트랜잭션의 Commit 과 Rollback

### Commit

하나의 트랜잭션이 **성공적으로 끝나서 데이터베이스가 일관성있는 상태에 있음**을 의미한다.

### Rollback

트랜잭션의 원자성이 깨질 때, 즉 **하나의 트랜잭션 처리가 비정상적으로 종료** 되었을 때의 상태를 뜻한다.Rollback 이 이뤄진다면 트랜잭션을 다시 실행하거나 부분적으로 변경된 결과를 취소할 수 있다.

## 트랜잭션의 상태

![https://blog.kakaocdn.net/dn/rn8cu/btq14ZlxcJo/yRqE4p9LW0ZD5knwx1S07K/img.png](https://blog.kakaocdn.net/dn/rn8cu/btq14ZlxcJo/yRqE4p9LW0ZD5knwx1S07K/img.png)

트랜잭션은 논리적으로 5가지의 상태에 있을 수 있다.

- Active
    - 트랜잭션이 현재 실행 중인 상태
- Failed
    - 트랜잭이 실행되다 오류가 발생해서 중단된 상태
- Aborted
    - 브랜잭션이 비정상 종료되어 Rollback 이 수행된 상태
- Partially Committed
    - 트랜잭션의 연산이 마지막까지 실행되고 Commit이 되기 직전 상태
- Committed
    - 트랜잭션이 성공적으로 종료되어 Commit 연산을 실행한 후의 상태
